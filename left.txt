<g:set var="appMode" value="${grailsApplication.config.casas.app.mode}"/>

<sec:internalUser>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#clearSearchLink').click(function() {
                $('#searchResults').empty();
                $('#homePageResultCount').empty();
                $('.simple-search-field').val('');
                $('#homeSearchString').val('');
            });
        });
    </script>
</sec:internalUser>

<div id="leftNavMinimized" style="display:none;" class="column ui-corner-all">
    <a href="#" title="<g:message code="uif.maximize.menu" default="Maximize Menu" />" class="expand-menu-btn" style="text-decoration:none;"><asset:image src="expand-right-15x13.png"/></a>
</div>

<div id="leftNavMaximized">

    <div id="tabs">
        <ul>
            <li><a href="#tabsNavigation"><g:message code="uif.menu" default="Menu" /></a></li>
            <sec:internalUser>
                <g:if test="${!appMode || appMode == 'TRAN'}">
                    <li><a href="#tabsSearchResults"><g:message code="uif.search" default="Search" /></a></li>
                </g:if>
            </sec:internalUser>
        </ul>

        <div id="tabsNavigation" style="padding: 0.2em 0.2em 0.2em 0.2em;">
            <div class="leftnav-toolbar tree-control">
                <table style="width: 100%;">
                    <tr>
                        <td>
                            <a title="<g:message code="uif.collapse.all" default="Collapse All" />" class="collapse-all" id="collapseAll"
                               style="text-decoration:none;margin-right:0.5em;"><asset:image
                                    src="collapse-all-20.png" height="20" width="20"
                                    alt="${message(code: 'uif.collapse.all.image.alt.text', default: 'Collapse Icon')}"/>
                            </a>
                            <a title="<g:message code="uif.expand.all" default="Expand All" />"
                               class="expand-all" id="expandAll"
                               style="text-decoration:none;">
                                <asset:image src="expand-all-20.png"
                                             height="20" width="20"
                                             alt="${message(code: 'uif.expand.all.image.alt.text', default: 'Expand Icon')}"/>
                            </a>

                        </td>
                        <td style="text-align: right; vertical-align: top;">
                            <a title="<g:message code="uif.minimize.menu" default="Minimize Menu" />" class="collapse-menu-btn"
                               style="text-decoration:none;">
                                <asset:image src="collapse-left-15x13.png"
                                             alt="${message(code: 'uif.minimize.menu.image.alt.text', default: 'Minimize icon')}"/>
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
            <g:render template="/common/menuItems"/>
        </div>

        <sec:internalUser>
            <g:if test="${!appMode || appMode == 'TRAN'}">
                <div id="tabsSearchResults" style="padding: 0.2em 0.2em 0.2em 0.2em;">
                    <g:form name="simpleSearchForm" autocomplete="off">
                        <g:hiddenField name="subprogramAcronym" value="" />

                        <table style="width: 100%">
                            <tr>
                                <td>
                                    <g:render template="/search/simpleSearch"/>

                                </td>
                                <td style="text-align: right; vertical-align: top;">
                                    <a href="/" title="<g:message code="uif.minimize.menu" default="Minimize Menu" />" class="collapse-menu-btn"
                                       style="text-decoration:none;">
                                        <asset:image src="collapse-left-15x13.png"
                                                     alt="${message(code: 'uif.minimize.menu.image.alt.text', default: 'Minimize Icon')}"/>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <span style="white-space: nowrap">
                                        <a href="#" id="advancedSearchLink" shortcutkey="F2" title="Shortcut Key: F2"><g:message code="uif.advanced.search" default="Advanced Search" /></a>
                                        &nbsp;&nbsp;
                                        <a href="#" id="clearSearchLink"><g:message code="uif.clear.search" default="Clear Search" /></a>
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div id="searchResults" class="search-results ajax-links" style="padding-top: 0.5em;">
                                        <div class="accordion"></div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </g:form>
                </div>
            </g:if>
        </sec:internalUser>
    </div>
</div>
